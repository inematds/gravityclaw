<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gravity Claw â€” Feature Store</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg:        #081518;
      --surface:   #0f2328;
      --surface-2: #112a31;
      --surface-3: #163540;
      --border:    #1e4050;
      --text:      #e2f0ee;
      --text-muted:#7eb8b0;
      --text-dim:  #3d7a72;
      --accent:    #22d3a8;
      --accent-2:  #5eead4;
      --accent-3:  #f472b6;
      --green:     #22d3a8;
      --orange:    #fbbf24;
      --red:       #f87171;
      --cyan:      #67e8f9;
      --radius:    14px;
      --radius-sm: 8px;
      --shadow:    0 4px 24px rgba(0,0,0,0.5);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Outfit', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* â”€â”€ Background â”€â”€ */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background:
        radial-gradient(ellipse at 15% 25%, rgba(34,211,168,0.07) 0%, transparent 55%),
        radial-gradient(ellipse at 85% 75%, rgba(244,114,182,0.05) 0%, transparent 55%),
        radial-gradient(ellipse at 50% 10%, rgba(103,232,249,0.04) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
      animation: bgDrift 18s ease-in-out infinite alternate;
    }

    @keyframes bgDrift {
      0%   { transform: translate(0, 0); }
      100% { transform: translate(-2%, -2%); }
    }

    .grid-bg {
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(rgba(34,211,168,0.025) 1px, transparent 1px),
        linear-gradient(90deg, rgba(34,211,168,0.025) 1px, transparent 1px);
      background-size: 56px 56px;
      pointer-events: none;
      z-index: 0;
    }

    /* â”€â”€ Layout â”€â”€ */
    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 28px;
      position: relative;
      z-index: 1;
    }

    /* â”€â”€ Header â”€â”€ */
    header {
      padding: 28px 0;
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      background: rgba(8,21,24,0.88);
      backdrop-filter: blur(12px);
      z-index: 50;
    }

    .header-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 16px;
    }

    .logo-area {
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .logo-icon {
      width: 46px;
      height: 46px;
      background: linear-gradient(135deg, var(--accent), var(--accent-3));
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      box-shadow: 0 0 28px rgba(34,211,168,0.35);
      animation: pulse 3.5s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 28px rgba(34,211,168,0.35); }
      50%       { box-shadow: 0 0 44px rgba(34,211,168,0.55); }
    }

    .logo-text h1 {
      font-size: 1.5rem;
      font-weight: 700;
      letter-spacing: -0.02em;
      background: linear-gradient(135deg, var(--text), var(--accent-2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .logo-text span {
      font-size: 0.72rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .header-stats {
      display: flex;
      gap: 12px;
    }

    .stat-box {
      text-align: center;
      padding: 8px 18px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      min-width: 72px;
    }

    .stat-box .num {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--accent);
    }

    .stat-box .label {
      font-size: 0.65rem;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    /* â”€â”€ Hero â”€â”€ */
    .hero {
      text-align: center;
      padding: 72px 0 52px;
    }

    .hero h2 {
      font-size: clamp(2rem, 5vw, 3.4rem);
      font-weight: 800;
      line-height: 1.12;
      letter-spacing: -0.03em;
      margin-bottom: 18px;
    }

    .hero h2 .hl {
      background: linear-gradient(135deg, var(--accent), var(--accent-3));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .hero p {
      color: var(--text-muted);
      font-size: 1.05rem;
      max-width: 520px;
      margin: 0 auto;
      line-height: 1.65;
    }

    /* â”€â”€ Category Filter â”€â”€ */
    .filter-wrap {
      position: sticky;
      top: 85px;
      z-index: 40;
      background: rgba(8,21,24,0.9);
      backdrop-filter: blur(10px);
      padding: 14px 0;
      border-bottom: 1px solid var(--border);
      margin-bottom: 36px;
    }

    .filter-inner {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .search-input {
      flex: 1;
      min-width: 200px;
      max-width: 300px;
      padding: 9px 16px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      color: var(--text);
      font-family: 'Outfit', sans-serif;
      font-size: 0.88rem;
      outline: none;
      transition: border-color 0.2s;
    }

    .search-input:focus { border-color: var(--accent); }
    .search-input::placeholder { color: var(--text-dim); }

    .cat-btn {
      padding: 8px 14px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      color: var(--text-muted);
      font-family: 'Outfit', sans-serif;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }

    .cat-btn:hover,
    .cat-btn.active {
      background: var(--accent);
      color: #081518;
      border-color: var(--accent);
      font-weight: 600;
    }

    /* â”€â”€ Cards Grid â”€â”€ */
    .section-label {
      font-size: 0.78rem;
      font-weight: 600;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-label::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--border);
    }

    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
      gap: 20px;
      margin-bottom: 60px;
    }

    /* â”€â”€ Feature Card â”€â”€ */
    .fcard {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      transition: all 0.25s ease;
      animation: cardIn 0.4s ease backwards;
    }

    @keyframes cardIn {
      from { opacity: 0; transform: translateY(16px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .fcard:hover {
      border-color: var(--accent);
      box-shadow: 0 0 36px rgba(34,211,168,0.12);
      transform: translateY(-2px);
    }

    .fcard-head {
      padding: 18px 20px 10px;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .fcard-icon {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    .fcard-badge {
      padding: 4px 10px;
      font-size: 0.65rem;
      font-weight: 600;
      border-radius: 20px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    /* badge colours */
    .b-msg    { background: rgba(34,211,168,0.12);  color: var(--accent-2); }
    .b-voice  { background: rgba(251,191,36,0.12);  color: var(--orange); }
    .b-mem    { background: rgba(103,232,249,0.12);  color: var(--cyan); }
    .b-llm    { background: rgba(244,114,182,0.12);  color: var(--accent-3); }
    .b-tools  { background: rgba(34,211,168,0.12);  color: var(--accent); }
    .b-proact { background: rgba(251,191,36,0.12);  color: var(--orange); }
    .b-sec    { background: rgba(248,113,113,0.12); color: var(--red); }
    .b-arch   { background: rgba(103,232,249,0.12);  color: var(--cyan); }
    .b-cloud  { background: rgba(244,114,182,0.12);  color: var(--accent-3); }
    .b-ux     { background: rgba(34,211,168,0.12);  color: var(--accent-2); }
    .b-why    { background: rgba(248,113,113,0.12); color: var(--red); }

    .fcard-body {
      padding: 0 20px 18px;
    }

    .fcard-body h3 {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 5px;
      letter-spacing: -0.01em;
    }

    .fcard-body p {
      color: var(--text-muted);
      font-size: 0.82rem;
      line-height: 1.55;
      margin-bottom: 14px;
    }

    /* â”€â”€ Feature Items â”€â”€ */
    .features {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .feat {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 11px;
      background: var(--surface-2);
      border: 1px solid transparent;
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all 0.18s;
      user-select: none;
    }

    .feat:hover {
      background: var(--surface-3);
      border-color: var(--border);
    }

    .feat.sel {
      background: rgba(34,211,168,0.1);
      border-color: var(--accent);
    }

    .feat-check {
      width: 17px;
      height: 17px;
      border-radius: 4px;
      border: 2px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: all 0.18s;
      font-size: 10px;
      color: transparent;
    }

    .feat.sel .feat-check {
      background: var(--accent);
      border-color: var(--accent);
      color: #081518;
    }

    .feat-name {
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--text);
      flex: 1;
    }

    .feat-sub {
      font-size: 0.72rem;
      color: var(--text-dim);
      font-style: italic;
    }

    .feat-tag {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.62rem;
      color: var(--text-dim);
      background: var(--surface);
      padding: 2px 7px;
      border-radius: 4px;
      white-space: nowrap;
    }

    /* â”€â”€ Empty state â”€â”€ */
    .empty {
      grid-column: 1/-1;
      text-align: center;
      padding: 80px 0;
      color: var(--text-dim);
      font-size: 1.1rem;
    }

    /* â”€â”€ Floating basket â”€â”€ */
    .basket {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 100;
      display: none;
      align-items: center;
      gap: 12px;
      background: var(--surface-2);
      border: 1px solid var(--border);
      border-radius: 50px;
      padding: 10px 10px 10px 20px;
      box-shadow: 0 8px 40px rgba(0,0,0,0.6);
      backdrop-filter: blur(12px);
    }

    .basket.show { display: flex; }

    .basket-info {
      font-size: 0.85rem;
      color: var(--text-muted);
      white-space: nowrap;
    }

    .basket-info strong {
      color: var(--accent);
      font-family: 'JetBrains Mono', monospace;
    }

    .basket-clear {
      padding: 8px 16px;
      background: transparent;
      border: 1px solid var(--border);
      border-radius: 20px;
      color: var(--text-muted);
      font-family: 'Outfit', sans-serif;
      font-size: 0.78rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .basket-clear:hover { border-color: var(--red); color: var(--red); }

    .basket-gen {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 22px;
      background: linear-gradient(135deg, var(--accent), #14b8a6);
      color: #081518;
      border: none;
      border-radius: 24px;
      font-family: 'Outfit', sans-serif;
      font-size: 0.88rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.25s;
      box-shadow: 0 0 24px rgba(34,211,168,0.3);
    }

    .basket-gen:hover {
      transform: translateY(-1px);
      box-shadow: 0 0 36px rgba(34,211,168,0.5);
    }

    /* â”€â”€ Modal â”€â”€ */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.75);
      backdrop-filter: blur(8px);
      z-index: 200;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }

    .overlay.open { display: flex; }

    .modal {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      width: 100%;
      max-width: 740px;
      max-height: 82vh;
      display: flex;
      flex-direction: column;
      animation: modalIn 0.28s ease;
    }

    @keyframes modalIn {
      from { opacity: 0; transform: scale(0.96) translateY(16px); }
      to   { opacity: 1; transform: scale(1) translateY(0); }
    }

    .modal-head {
      padding: 20px 24px;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-head h3 {
      font-size: 1.05rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .modal-close {
      width: 30px;
      height: 30px;
      border-radius: 6px;
      border: 1px solid var(--border);
      background: var(--surface-2);
      color: var(--text-muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 15px;
      transition: all 0.2s;
    }

    .modal-close:hover { border-color: var(--red); color: var(--red); }

    .modal-body {
      padding: 24px;
      overflow-y: auto;
      flex: 1;
    }

    .prompt-out {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      line-height: 1.75;
      color: var(--text);
      background: var(--bg);
      padding: 20px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      white-space: pre-wrap;
      word-break: break-word;
    }

    .modal-foot {
      padding: 16px 24px;
      border-top: 1px solid var(--border);
      display: flex;
      gap: 10px;
      justify-content: flex-end;
    }

    .modal-foot button {
      padding: 9px 20px;
      border-radius: var(--radius-sm);
      font-family: 'Outfit', sans-serif;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-copy   { background: var(--accent); color: #081518; border: none; }
    .btn-copy:hover { background: var(--accent-2); }
    .btn-cancel { background: transparent; color: var(--text-muted); border: 1px solid var(--border); }
    .btn-cancel:hover { border-color: var(--text-muted); }

    /* â”€â”€ Toast â”€â”€ */
    .toast {
      position: fixed;
      top: 24px;
      right: 24px;
      padding: 12px 20px;
      background: var(--accent);
      color: #081518;
      border-radius: var(--radius-sm);
      font-size: 0.85rem;
      font-weight: 700;
      z-index: 300;
      transform: translateY(-16px);
      opacity: 0;
      transition: all 0.28s;
      pointer-events: none;
    }

    .toast.show { transform: translateY(0); opacity: 1; }

    /* â”€â”€ Footer â”€â”€ */
    footer {
      padding: 32px 0;
      border-top: 1px solid var(--border);
      text-align: center;
    }

    footer p { color: var(--text-dim); font-size: 0.78rem; line-height: 1.7; }
    footer a  { color: var(--accent-2); text-decoration: none; }
    footer a:hover { text-decoration: underline; }

    /* â”€â”€ Responsive â”€â”€ */
    @media (max-width: 640px) {
      .cards-grid { grid-template-columns: 1fr; }
      .header-stats { gap: 8px; }
      .stat-box { padding: 6px 12px; }
      .basket { width: calc(100% - 32px); border-radius: var(--radius); flex-wrap: wrap; }
    }
  </style>
</head>
<body>

<div class="grid-bg"></div>
<div class="toast" id="toast">âœ… Copied to clipboard!</div>

<!-- Header -->
<header>
  <div class="container header-inner">
    <div class="logo-area">
      <a href="../index.html" style="display:flex;align-items:center;gap:14px;text-decoration:none;color:inherit;">
        <div class="logo-icon">ğŸ¦</div>
        <div class="logo-text">
          <h1>Gravity Claw</h1>
          <span>Feature Store</span>
        </div>
      </a>
    </div>
    <div class="header-stats">
      <a href="../index.html" style="display:flex;align-items:center;padding:7px 14px;border:1px solid var(--border);border-radius:20px;color:var(--text-muted);font-size:.76rem;text-decoration:none;transition:all .2s;" onmouseover="this.style.borderColor='var(--accent)';this.style.color='var(--accent)'" onmouseout="this.style.borderColor='var(--border)';this.style.color='var(--text-muted)'">â† Hub</a>
      <div class="stat-box">
        <div class="num" id="statTotal">0</div>
        <div class="label">Features</div>
      </div>
      <div class="stat-box">
        <div class="num" id="statSel">0</div>
        <div class="label">Selected</div>
      </div>
      <div class="stat-box">
        <div class="num">11</div>
        <div class="label">Categories</div>
      </div>
    </div>
  </div>
</header>

<!-- Hero -->
<section class="hero">
  <div class="container">
    <h2>Pick the features you want.<br><span class="hl">Get a prompt to build them.</span></h2>
    <p>Powered by the open-source AI agent ecosystem. Build your personal AI assistant brick-by-brick â€” every line understood, every secret safe.</p>
  </div>
</section>

<!-- Filter -->
<div class="filter-wrap">
  <div class="container filter-inner">
    <input class="search-input" id="searchInput" type="text" placeholder="ğŸ” Search featuresâ€¦" />
    <button class="cat-btn active" data-cat="all">All</button>
    <button class="cat-btn" data-cat="messaging">ğŸ’¬ Messaging</button>
    <button class="cat-btn" data-cat="voice">ğŸ™ï¸ Voice</button>
    <button class="cat-btn" data-cat="memory">ğŸ§  Memory</button>
    <button class="cat-btn" data-cat="llm">âœ¨ LLM</button>
    <button class="cat-btn" data-cat="tools">âš¡ Tools</button>
    <button class="cat-btn" data-cat="proactive">ğŸ”” Proactive</button>
    <button class="cat-btn" data-cat="security">ğŸ›¡ï¸ Security</button>
    <button class="cat-btn" data-cat="architecture">ğŸ—ï¸ Architecture</button>
    <button class="cat-btn" data-cat="deployment">â˜ï¸ Deployment</button>
    <button class="cat-btn" data-cat="ux">ğŸ¨ UX</button>
    <button class="cat-btn" data-cat="why">ğŸ¦€ Why Claw</button>
  </div>
</div>

<!-- Grid -->
<div class="container">
  <div class="section-label" id="sectionLabel">All Features</div>
  <div class="cards-grid" id="grid"></div>
</div>

<!-- Basket -->
<div class="basket" id="basket">
  <div class="basket-info"><strong id="basketCount">0</strong> features in basket</div>
  <button class="basket-clear" id="clearBtn">Clear</button>
  <button class="basket-gen" id="genBtn">ğŸ“‹ Generate Prompt</button>
</div>

<!-- Modal -->
<div class="overlay" id="overlay">
  <div class="modal">
    <div class="modal-head">
      <h3>ğŸ§¬ Your Build Prompt</h3>
      <button class="modal-close" id="modalClose">Ã—</button>
    </div>
    <div class="modal-body">
      <div class="prompt-out" id="promptOut"></div>
    </div>
    <div class="modal-foot">
      <button class="btn-cancel" id="modalCancel">Close</button>
      <button class="btn-copy"   id="copyBtn">ğŸ“‹ Copy to Clipboard</button>
    </div>
  </div>
</div>

<!-- Footer -->
<footer>
  <div class="container">
    <p>
      Gravity Claw â€” Feature Store<br>
      Powered by the <a href="https://openclaw.ai" target="_blank">OpenClaw</a> open-source AI agent ecosystem Â·
      Built with the CLAWS framework Â·
      Deploy on <a href="https://railway.app" target="_blank">Railway</a>
    </p>
  </div>
</footer>

<script>
// â”€â”€ DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const CARDS = [
  {
    id: 'messaging',
    icon: 'ğŸ’¬',
    name: 'Messaging & Channels',
    desc: 'Interface your agent with every major chat platform. One brain, many apps.',
    badge: 'Comms',
    badgeClass: 'b-msg',
    cat: 'messaging',
    features: [
      { name: 'Telegram Bot',        sub: 'replies in groups',        tag: 'primary'  },
      { name: 'WhatsApp',            sub: 'texts, photos, group chats', tag: 'channel' },
      { name: 'Discord Bot',         sub: 'threads and conversations', tag: 'channel'  },
      { name: 'Slack Bot',           sub: 'channels, DMs, and threads', tag: 'channel' },
      { name: 'Signal Messaging',    sub: 'super-private messaging',   tag: 'channel'  },
      { name: 'iMessage',            sub: 'blue bubbles via Mac',      tag: 'channel'  },
      { name: 'Microsoft Teams',     sub: 'office and company use',    tag: 'channel'  },
      { name: 'WebChat UI',          sub: 'browser chat window',       tag: 'web'      },
      { name: 'Gmail Integration',   sub: 'real-time notifications',   tag: 'email'    },
      { name: 'Multi-Channel Router',sub: 'one brain, many apps',      tag: 'router'   },
    ]
  },
  {
    id: 'voice',
    icon: 'ğŸ™ï¸',
    name: 'Voice & Speech',
    desc: 'Listen with Whisper, speak with ElevenLabs. Send voice notes, get voice responses.',
    badge: 'Voice',
    badgeClass: 'b-voice',
    cat: 'voice',
    features: [
      { name: 'Voice Transcription',      sub: 'listens to voice notes',          tag: 'STT'     },
      { name: 'Voice Wake Word',          sub: 'Hey Claw activation',             tag: 'trigger' },
      { name: 'Talk Mode',               sub: 'real voice conversations',         tag: 'duplex'  },
      { name: 'Text-to-Speech',          sub: 'speaks replies aloud',             tag: 'TTS'     },
      { name: 'ElevenLabs Voice',        sub: 'realistic human-sounding voice',   tag: 'TTS'     },
      { name: 'Telegram Voice Messages', sub: 'two-way voice in Telegram',        tag: 'channel' },
    ]
  },
  {
    id: 'memory',
    icon: 'ğŸ§ ',
    name: 'Memory & Context',
    desc: 'Three-tier memory: Core, Conversation Buffer, Semantic Long-Term. Tell it once, remembered forever.',
    badge: 'Memory',
    badgeClass: 'b-mem',
    cat: 'memory',
    features: [
      { name: 'SQLite Memory',         sub: 'remembers between conversations',  tag: 'tier-2'  },
      { name: 'Knowledge Graph',       sub: 'web of connected facts',           tag: 'graph'   },
      { name: 'Context Pruning',       sub: 'summarises older parts',           tag: 'token$'  },
      { name: 'Multimodal Memory',     sub: 'remembers photos and videos',      tag: 'media'   },
      { name: 'Self-Evolving Memory',  sub: 'gets smarter over time',           tag: 'active'  },
      { name: 'Markdown Memory',       sub: 'human-readable text files',        tag: 'files'   },
      { name: 'Supabase + pgvector',   sub: 'semantic similarity search',       tag: 'tier-3'  },
    ]
  },
  {
    id: 'llm',
    icon: 'âœ¨',
    name: 'LLM & Models',
    desc: 'Swap models on the fly. Claude, GPT-4, Gemini, local Ollama â€” all pluggable.',
    badge: 'LLM',
    badgeClass: 'b-llm',
    cat: 'llm',
    features: [
      { name: 'Multi-LLM Providers',   sub: 'ChatGPT, Claude, Gemini',     tag: 'flex'    },
      { name: 'Model Failover',        sub: 'auto-switches on failure',     tag: 'resilience'},
      { name: 'OpenRouter',            sub: '100+ AI models via one key',   tag: 'API'     },
      { name: 'Local LLMs (Ollama)',   sub: 'completely offline',           tag: 'privacy' },
      { name: 'Thinking Levels',       sub: 'quick to deep analysis',       tag: 'UX'      },
    ]
  },
  {
    id: 'tools',
    icon: 'âš¡',
    name: 'Tools & Automation',
    desc: 'Shell, files, browser, web search â€” all wired through MCP for auditable, sandboxed execution.',
    badge: 'Tools',
    badgeClass: 'b-tools',
    cat: 'tools',
    features: [
      { name: 'Shell Commands',   sub: 'running apps, moving files',      tag: 'shell'   },
      { name: 'File Operations',  sub: 'read, create, organise files',    tag: 'fs'      },
      { name: 'Browser Automation',sub: 'click buttons, take screenshots', tag: 'CDP'    },
      { name: 'Web Search',       sub: 'Google in real time',             tag: 'search'  },
      { name: 'Scheduled Tasks',  sub: 'daily reports, weekly check-ins', tag: 'cron'    },
      { name: 'Webhook Triggers', sub: 'reacts to other app events',      tag: 'event'   },
      { name: 'MCP Tool Bridge',  sub: 'Gmail, Notion, databases',        tag: 'MCP'     },
      { name: 'Skills System',    sub: 'teach without coding',            tag: 'extend'  },
    ]
  },
  {
    id: 'proactive',
    icon: 'ğŸ””',
    name: 'Proactive Behavior',
    desc: 'The bot checks in on you â€” not the other way around. Heartbeat cron for daily briefings.',
    badge: 'Proactive',
    badgeClass: 'b-proact',
    cat: 'proactive',
    features: [
      { name: 'Morning Briefing',      sub: 'weather, calendar, news',         tag: 'daily'    },
      { name: 'Evening Recap',         sub: 'daily summary',                   tag: 'daily'    },
      { name: 'Heartbeat System',      sub: 'background event watcher',        tag: 'cron'     },
      { name: 'Smart Recommendations', sub: 'suggests before asked',           tag: 'proactive'},
    ]
  },
  {
    id: 'security',
    icon: 'ğŸ›¡ï¸',
    name: 'Security & Isolation',
    desc: 'Whitelisted Telegram IDs, sealed execution, encrypted secrets. No open ports, ever.',
    badge: 'Security',
    badgeClass: 'b-sec',
    cat: 'security',
    features: [
      { name: 'Telegram ID Whitelist', sub: 'only your ID gets a response',    tag: 'auth'     },
      { name: 'Container Sandbox',     sub: 'sealed box execution',            tag: 'sandbox'  },
      { name: 'Command Allowlists',    sub: 'parental controls for AI',        tag: 'policy'   },
      { name: 'Encrypted Secrets',     sub: 'vault for API keys',              tag: 'crypto'   },
      { name: 'Air-Gapped Mode',       sub: 'completely offline',              tag: 'offline'  },
      { name: 'No Open Ports',         sub: 'Telegram long-polling only',      tag: 'network'  },
    ]
  },
  {
    id: 'architecture',
    icon: 'ğŸ—ï¸',
    name: 'Agent Architecture',
    desc: 'Single agent to swarm. Pluggable components, mesh workflows, agent-to-agent comms.',
    badge: 'Architecture',
    badgeClass: 'b-arch',
    cat: 'architecture',
    features: [
      { name: 'Agentic Tool Loop',      sub: 'thinks, acts, iterates',           tag: 'core'    },
      { name: 'Agent Swarms',           sub: 'specialized team collaboration',   tag: 'multi'   },
      { name: 'Agent-to-Agent Comms',   sub: 'multiple agents coordinate',       tag: 'mesh'    },
      { name: 'Mesh Workflows',         sub: 'breaks goals into steps',          tag: 'graph'   },
      { name: 'Plugin System',          sub: 'swap Lego brick components',       tag: 'extend'  },
      { name: 'Max Iteration Limit',    sub: 'safety cap on agent loops',        tag: 'safety'  },
    ]
  },
  {
    id: 'deployment',
    icon: 'â˜ï¸',
    name: 'Platform & Deployment',
    desc: 'Railway, Docker, Cloudflare Workers, ESP32, mobile â€” deploy anywhere.',
    badge: 'Deploy',
    badgeClass: 'b-cloud',
    cat: 'deployment',
    features: [
      { name: 'Railway Cloud Deploy',     sub: 'one command everywhere',         tag: 'hosting' },
      { name: 'Docker Production Build',  sub: 'reproducible container',         tag: 'docker'  },
      { name: 'Cloudflare Workers',       sub: 'no server management',           tag: 'edge'    },
      { name: 'ESP32 Microcontroller',    sub: '$5 chip with WiFi',              tag: 'hardware'},
      { name: 'macOS Menu Bar',           sub: 'system tray quick chat',         tag: 'native'  },
      { name: 'iOS & Android',            sub: 'companion mobile app',           tag: 'mobile'  },
    ]
  },
  {
    id: 'ux',
    icon: 'ğŸ¨',
    name: 'UX & Interaction',
    desc: 'Typing indicators, slash commands, live canvas, usage tracking. Feels like a real product.',
    badge: 'UX',
    badgeClass: 'b-ux',
    cat: 'ux',
    features: [
      { name: 'Typing Indicators',  sub: 'AI is thinkingâ€¦',               tag: 'polish'  },
      { name: 'Slash Commands',     sub: '/status, /new shortcuts',        tag: 'UX'      },
      { name: 'Live Canvas',        sub: 'interactive widgets and charts', tag: 'rich'    },
      { name: 'Usage Tracking',     sub: 'cost per conversation',          tag: 'ops'     },
      { name: 'Group Management',   sub: 'isolated per-group memory',      tag: 'multi'   },
    ]
  },
  {
    id: 'why',
    icon: 'ğŸ¦€',
    name: 'Why Gravity Claw?',
    desc: 'Every architectural choice is a deliberate answer to a real OpenClaw failure mode.',
    badge: 'Why',
    badgeClass: 'b-why',
    cat: 'why',
    features: [
      { name: 'You Built It',            sub: 'understand every line of architecture', tag: 'learn'   },
      { name: 'MCP vs Skills',           sub: '341 malicious community skills found',  tag: 'safe'    },
      { name: 'Not On The Internet',     sub: '42,665 OpenClaw instances exposed',     tag: 'secure'  },
      { name: '$200 Flat Pricing',       sub: '$500â€“$5K/mo â†’ Claude Max $200 flat',   tag: 'cost'    },
      { name: 'Builder IS the Demo',     sub: 'built inside an AI agent ecosystem',   tag: 'dogfood' },
      { name: 'Your Data Stays Local',   sub: 'never leaves your computer',           tag: 'privacy' },
      { name: 'Supabase + pgvector',     sub: 'persistent semantic search, free tier',tag: 'memory'  },
    ]
  },
];

// â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const selected = new Set();
let activeCat  = 'all';
let searchTerm = '';

// â”€â”€ RENDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function render() {
  const grid = document.getElementById('grid');
  grid.innerHTML = '';

  const filtered = CARDS.filter(c => {
    if (activeCat !== 'all' && c.cat !== activeCat) return false;
    if (searchTerm) {
      const s = searchTerm.toLowerCase();
      return c.name.toLowerCase().includes(s) ||
             c.desc.toLowerCase().includes(s) ||
             c.features.some(f => f.name.toLowerCase().includes(s) || (f.sub||'').toLowerCase().includes(s));
    }
    return true;
  });

  if (!filtered.length) {
    grid.innerHTML = '<div class="empty">No features match your search ğŸŒ´</div>';
    return;
  }

  filtered.forEach((card, idx) => {
    const el = document.createElement('div');
    el.className = 'fcard';
    el.style.animationDelay = (idx * 0.05) + 's';

    const featsHtml = card.features.map(f => {
      const fid = card.id + ':' + f.name;
      const isSel = selected.has(fid) ? 'sel' : '';
      return `
        <div class="feat ${isSel}" data-fid="${fid}">
          <div class="feat-check">âœ“</div>
          <span class="feat-name">${f.name}</span>
          ${f.sub ? `<span class="feat-sub">${f.sub}</span>` : ''}
          <span class="feat-tag">${f.tag}</span>
        </div>
      `;
    }).join('');

    el.innerHTML = `
      <div class="fcard-head">
        <div class="fcard-icon">${card.icon}</div>
        <span class="fcard-badge ${card.badgeClass}">${card.badge}</span>
      </div>
      <div class="fcard-body">
        <h3>${card.name}</h3>
        <p>${card.desc}</p>
        <div class="features">${featsHtml}</div>
      </div>
    `;

    el.querySelectorAll('.feat').forEach(f => {
      f.addEventListener('click', () => {
        const fid = f.dataset.fid;
        if (selected.has(fid)) { selected.delete(fid); f.classList.remove('sel'); }
        else                   { selected.add(fid);    f.classList.add('sel'); }
        syncCounts();
      });
    });

    grid.appendChild(el);
  });

  syncCounts();
}

function syncCounts() {
  const total = CARDS.reduce((s, c) => s + c.features.length, 0);
  document.getElementById('statTotal').textContent  = total;
  document.getElementById('statSel').textContent    = selected.size;
  document.getElementById('basketCount').textContent = selected.size;

  const basket = document.getElementById('basket');
  if (selected.size > 0) basket.classList.add('show');
  else basket.classList.remove('show');
}

// â”€â”€ FILTER BUTTONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.querySelectorAll('.cat-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    activeCat = btn.dataset.cat;

    const labels = {
      all: 'All Features', messaging: 'ğŸ’¬ Messaging & Channels',
      voice: 'ğŸ™ï¸ Voice & Speech', memory: 'ğŸ§  Memory & Context',
      llm: 'âœ¨ LLM & Models', tools: 'âš¡ Tools & Automation',
      proactive: 'ğŸ”” Proactive Behavior', security: 'ğŸ›¡ï¸ Security & Isolation',
      architecture: 'ğŸ—ï¸ Agent Architecture', deployment: 'â˜ï¸ Platform & Deployment',
      ux: 'ğŸ¨ UX & Interaction', why: 'ğŸ¦€ Why Gravity Claw'
    };
    document.getElementById('sectionLabel').textContent = labels[activeCat] || 'Features';
    render();
  });
});

// â”€â”€ SEARCH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.getElementById('searchInput').addEventListener('input', e => {
  searchTerm = e.target.value;
  render();
});

// â”€â”€ CLEAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.getElementById('clearBtn').addEventListener('click', () => {
  selected.clear();
  render();
});

// â”€â”€ GENERATE PROMPT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.getElementById('genBtn').addEventListener('click', () => {
  const grouped = {};
  selected.forEach(fid => {
    const [cardId, featName] = fid.split(':');
    const card = CARDS.find(c => c.id === cardId);
    if (!grouped[card.name]) grouped[card.name] = [];
    grouped[card.name].push(featName);
  });

  let prompt = `# Gravity Claw â€” Build Prompt\n`;
  prompt += `# Generated: ${new Date().toISOString().split('T')[0]}\n`;
  prompt += `# Selected: ${selected.size} features\n\n`;
  prompt += `You are building a personal AI agent called "Gravity Claw".\n`;
  prompt += `Stack: TypeScript Â· grammy (Telegram) Â· @anthropic-ai/sdk Â· better-sqlite3 Â· tsx Â· node-cron\n`;
  prompt += `Deployment: Railway via Docker Â· Telegram long-polling (no open ports)\n\n`;
  prompt += `## Security Requirements (Non-Negotiable)\n`;
  prompt += `- User ID whitelist â€” silently ignore all Telegram users except the owner\n`;
  prompt += `- Secrets in .env only â€” never in code, logs, or memory files\n`;
  prompt += `- Max iteration limit on the agent loop\n`;
  prompt += `- Dangerous shell commands require explicit confirmation\n\n`;
  prompt += `## Selected Features\n\n`;

  for (const [cardName, feats] of Object.entries(grouped)) {
    prompt += `### ${cardName}\n`;
    feats.forEach(f => { prompt += `- ${f}\n`; });
    prompt += `\n`;
  }

  prompt += `## Build Instructions\n\n`;
  prompt += `Build these features brick-by-brick. Each module should be:\n`;
  prompt += `- Modular and independently testable\n`;
  prompt += `- Type-safe (TypeScript strict mode)\n`;
  prompt += `- Production-ready with proper error handling\n\n`;
  prompt += `Start with the Agentic Tool Loop, then layer in communication channels, memory, and integrations one at a time. Run \`npx tsc --noEmit\` before each Railway deploy.`;

  document.getElementById('promptOut').textContent = prompt;
  document.getElementById('overlay').classList.add('open');
});

// â”€â”€ MODAL CONTROLS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
['modalClose','modalCancel'].forEach(id => {
  document.getElementById(id).addEventListener('click', () => {
    document.getElementById('overlay').classList.remove('open');
  });
});

document.getElementById('overlay').addEventListener('click', e => {
  if (e.target === e.currentTarget) document.getElementById('overlay').classList.remove('open');
});

document.getElementById('copyBtn').addEventListener('click', () => {
  navigator.clipboard.writeText(document.getElementById('promptOut').textContent).then(() => {
    const t = document.getElementById('toast');
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 2200);
  });
});

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
render();
</script>
</body>
</html>
